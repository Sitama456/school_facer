### IO模型
数据IO分为两个阶段，一是数据准备，二是数据读写。阻塞、非阻塞描述的是数据准备就绪状态，同步异步描述的是数据读写方式。
1. 阻塞IO。程序调用read(),数据没有准备好，进程阻塞(睡眠)。
2. 非阻塞IO。数据没准备好，read()也会直接返回-1，设置错误码位EAGAIN。但需要轮询去读，判断数据是否准备好了。
3. IO复用。数据没准备好是，应用程序会默认阻塞在select, poll, epoll上。与阻塞IO不同的是，应用程序相当于阻塞在多个socket上，只要有一个有消息，应用程序就会被唤醒。但是socket应该设置成非阻塞的，否则应用程序就很可能阻塞在某个socket上，而不是IO复用函数上。所以，IO复用是阻塞IO和非阻塞IO优点的结合。
4. 信号驱动。应用程序注册一个信号处理函数，当事件发生之后，由操作系统以该信号通知应用程序。应用程序注册信号之后就不再关系数据什么时候到来，可以做其他事情。在此期间是异步的。但数据到达之后，应用程序仍需要同步地读取数据。
5. 异步IO。与信号驱动不同的是，应用程序在调用异步接口之后，到拿到数据这期间，都是操作系统负责。当信号到达时，数据已经在缓冲区中了，不需要应用程序拷贝数据。

### IO复用有哪些方式，优缺点？
1. 方式有select、poll、epoll三种方式。
2. select/poll的缺点是：
   - 单个进程能够监视的文件描述符数量存在最大限制，通常是1024个，当热可以更改。但由于select采用轮询方式扫描文件描述符，文件描述符的数量越多，性能越差。(#define __FD_SETSIZE 1024)
   - 内核/用户空间内存拷贝开销大，select需要复制大量的局部数组结构。
   - select返回的是整个句柄的数组，应用程序需要遍历震哥哥数组在能知道哪些socket发生了事件
3. 相对于select，poll使用了链表保存文件描述符，因此没有了监视文件描述符的限制，但其他三个缺点仍然存在。
4. epoll优点。
   - epoll通过linux内核中申请一个简易的文件系统，将原来select/poll调用分成三个部分。创建epoll对象，加入要简体的socket套接字，手机发生事件的fd。

### 边缘触发和水平触发
1. 边缘触发。当数据来临时只触发一次，如果一次没有读取完，下一次也不会再触发。直到网卡有新的数据到来。
2. 水平触发。只要有数据，事件就会一直触发。

### 怎么查看和修改进程最大文件描述符数量
1. cat/proc/{pid}/limits 中的最大打开文件Max Open file,默认是1024个
2. 修改方法1 ulimit -n 65536
3. 修改方法2 vin /etc/systemd/system.conf 中修改DefaultLimitNOFILE选项为65536