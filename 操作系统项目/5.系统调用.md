### 什么是系统调用
1. 系统调用是操作系统中十分重要的机制。用户进程在CPU上执行的指令种类是十分受限的，通常情况下也不能直接驱动硬件设备。因此，有很多任务不得不委托操作系统完成。比如分配内存、磁盘传输、创建文件、打开文件等。当用户程序需要执行这样的任务时，必须以某种机制通知操作系统来完成。系统执行完后，必须有办法把执行结果告诉用户进程。系统调用就是这样的机制。
2. 系统调用是用户进程进入内核态的唯一手段，是用户态进入内核态的门户，它在用户态程序中普遍存在。用户进程使用软中断指令(也可以是SYSENTER)陷入内核，之后的过程和中断类似。

### 举个例子说明
1. 假设用户程序需要打开一个文件。首先在用户态中准备好参数，调用open函数，open函数会进一步调用sys_open函数。在sys_open函数中，转化为系统调用接口syscall，参数加上一个系统调用号。
2. 在syscall中，获取可变参数的固定格式，并且将参数保存到通用寄存器中。然后执行int T_SYSCALL软中断，执行流转到中断服务程序中。
就进入了内核态。
3. 在内核中，通过中断号发现是一个系统调用，则调用系统调用总管函数syscall()。在syscall中，首先保存通用寄存器的值，即用户态传入的参数。内核中保存了系统调用程序的函数指针数组，以系统调用号做为索引，传入参数，调用具体的处理函数。
4. 具体的处理函数执行返回后，返回值被保存在中断帧的eax成员中。中断返回到用户态的syscall函数中，将寄存器EAX的值作为返回值，层层返回。

### 系统调用的最大参数个数限制
由于是采用寄存器来传递参数，所以系统调用的参数被限制为5个。中断返回时返回值被保存在EAX寄存器中。

### 有哪些系统调用？
存储管理: sys_pgdir()
进程管理: sys_exit() sys_fork() sys_wait() sys_yield()sys_kill() sys_getpid() sys_putc() sys_sleep()等
文件管理：sys_open() sys_close() sys_read()